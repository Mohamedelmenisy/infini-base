    <!-- ... (head and body up to script tags) ... -->
    </div> <!-- .signup-container -->

    <script type="module" src="js/auth.js"></script>
    <script type="module">
        // import { Auth } from './js/auth.js'; // Or ensure Auth is global

        document.getElementById('signupForm').addEventListener('submit', async function(e) { // Make async
            e.preventDefault();
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim().toLowerCase();
            const password = document.getElementById('password').value;

            if (!fullName || !email || !password) {
                alert('Please fill in all fields.');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            const expectedDomain = '@thecehfz.com';
            if (!email.endsWith(expectedDomain)) {
                 alert(`Please use a valid work email ending with ${expectedDomain}.`);
                 return;
            }

            if (password.length < 6) {
                alert('Password must be at least 6 characters long.');
                return;
            }

            // Auth.signup is now async
            const { user, error } = await Auth.signup(fullName, email, password);
            // Redirection and alerts are handled within Auth.signup
            if (error) {
                console.log("Signup attempt failed in page script.");
            }
        });

         // Redirect if already authenticated
        (async () => { // IIFE async
            await Auth.redirectIfAuthenticated('dashboard.html');
        })();
    </script>
</body>
</html>

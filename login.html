    <!-- ... (head and body up to script tags) ... -->
    </div> <!-- .login-container -->

    <!-- Make sure auth.js is loaded as a module or Auth is global -->
    <script type="module" src="js/auth.js"></script>
    <script type="module">
        // Import Auth if it's not global and auth.js exports it
        // If auth.js makes Auth global (window.Auth = Auth), this import is not strictly needed
        // but it's good practice for modules.
        // However, since auth.js already sets window.Auth, we can just use it.
        // import { Auth } from './js/auth.js'; // Or ensure Auth is global from auth.js

        document.getElementById('loginForm').addEventListener('submit', async function(e) { // Make async
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            // const rememberMe = document.getElementById('rememberMe').checked; // Supabase handles persistence

            if (!email || !password) {
                alert('Please fill in all fields.');
                return;
            }
            if (!email.includes('@')) {
                alert('Please enter a valid email address.');
                return;
            }

            // Auth.login is now async
            const { user, error } = await Auth.login(email, password);
            // Redirection is handled within Auth.login on success
            if (error) {
                console.log("Login attempt failed in page script.");
                // Error alert is handled within Auth.login
            }
        });

        // Redirect if already authenticated
        (async () => { // IIFE async
            // Use the new redirectIfAuthenticated method
            await Auth.redirectIfAuthenticated('dashboard.html');
        })();
    </script>
</body>
</html>
